<!DOCTYPE html>
<html>
<body>
<iframe src="https://copilotstudio.preview.microsoft.com/environments/07ff480a-0be9-ea97-b6fb-2fbf232acb55/bots/cr6f7_agent_a12gU3/webchat?__version__=2"></iframe>
</body>
<script>

let urlParams = new URLSearchParams(document.location.search);
console.log("Hello");
console.log(urlParams.get("floating_iframe_id"));  // gets iframe id

// A function to send a postmessage call from your chatbot to Coupa Core to resize.
function resize(options = {}){
  window.parent.postMessage(
    {
      action: "resize",
      client_id: "12345",
      iframe_id: urlParams.get("floating_iframe_id"),
      data: {
        height: 600, // height in px
        width: 600, // width in px
        initial: options.initial // Set this to true at the time of page load, false otherwise
      }
    }, "*" // substitute * with the coupahost url for enhanced security
  );
}

resize({ initial: true }) // Call this function with initial: true at the time of page reload.
resize({ initial: false }) // Call this function with initial: false at the time of button click to forcefully resize.
</script>
</html>
